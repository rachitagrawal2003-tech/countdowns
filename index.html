<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Countdowns ‚è≥</title>
  <style>
    .header-image img {
      width: 100%;
      max-height: 250px;
      object-fit: cover;
      border-radius: 15px;
      margin-top: 12px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      animation: fadeIn 1.4s ease;
    }

    /* Smooth fade-in */
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(1.02); }
      to { opacity: 1; transform: scale(1); }
    }
    body {
      font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: #fffafc;
      color: #3b3b3b;
      margin: 0;
      text-align: center;
    }
    h1 {
      font-size: 2rem;
      color: #e08eb4;
      margin: 28px 0 6px;
    }
    .countdowns {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 20px;
    }
    .card {
      background: #ffeef4;
      border-radius: 18px;
      box-shadow: 0 4px 12px rgba(0,0,0,.1);
      width: 250px;
      padding: 20px;
      position: relative;
      transition: transform .25s ease;
      cursor: pointer;
    }
    .card:hover { transform: translateY(-4px); }
    .emoji { font-size: 2rem; }
    .event {
      font-size: 1.2rem;
      color: #ff7da5;
      font-weight: 600;
      margin-top: 8px;
    }
    .days {
      font-size: 2.2rem;
      color: #5a4f4f;
      font-weight: 800;
      margin: 6px 0;
    }
    .note {
      font-size: .92rem;
      color: #6d6262;
      margin-top: 4px;
    }
    img {
      width: 80%;
      border-radius: 12px;
      margin-top: 10px;
    }
    footer {
      margin: 26px 0 36px;
      font-size: .82rem;
      color: #9b8b8b;
    }
    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.38);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 999;
    }
    .modal.open { display: flex; }
    .modal-card {
      background: #fff;
      max-width: 520px;
      width: 100%;
      border-radius: 20px;
      box-shadow: 0 12px 28px rgba(0,0,0,.18);
      padding: 26px 22px;
    }
    .modal-title {
      font-size: 1.2rem;
      color: #ff74a1;
      margin: 0 0 6px;
    }
    .modal-sub {
      font-size: .95rem;
      color: #6d6262;
      margin: 0 0 16px;
    }
    .bigtime {
      font-variant-numeric: tabular-nums;
      letter-spacing: .5px;
      font-size: 2.4rem;
      font-weight: 800;
      color: #3f3a3a;
      margin: 10px 0 6px;
    }
    .units {
      font-size: .8rem;
      color: #8a7f7f;
      margin-bottom: 14px;
    }
    .modal-close {
      margin-top: 10px;
      background: #ffe0eb;
      border: none;
      color: #7a5b66;
      padding: 10px 16px;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
    }
    .modal-close:hover { background: #ffd3e3; }
    #first-talk p, #first-date p, #first-iloveyou p {
      font-size: 1.1rem;
      font-weight: 500;
      color: #d47fa6;
    }
  </style>
</head>
<body>
  <!-- Header Image -->
  <div class="header-image">
    <img src="i-love-you.jpg" alt="I Love You" />
  </div>
  <h1>Countdowns ‚è≥</h1>

  <div class="countdowns">
    <!-- Our Anniversary -->
    <div class="card"
      data-title="Our Anniversary üíû"
      data-date="09-06"
      data-note="Celebrating us, every 6th September üíå"
      data-img="your-anniversary-image.jpg">
      <div class="emoji">üíû</div>
      <div class="event">Our Anniversary</div>
      <div class="days"></div>
      <div class="note">Celebrating us, every 6th September üíå</div>
      <img src="your-anniversary-image.jpg" alt="Our Anniversary"/>
    </div>

    <!-- Kitten‚Äôs Birthday -->
    <div class="card"
      data-title="Kitten‚Äôs Birthday üéÇ"
      data-date="01-02"
      data-note="tehe"
      data-img="kitten-birthday.jpg">
      <div class="emoji">üéÇ</div>
      <div class="event">Kitten‚Äôs Birthday</div>
      <div class="days"></div>
      <div class="note">tehe</div>
      <img src="kitten-birthday.jpg" alt="Kitten Birthday"/>
    </div>

    <!-- Daddy‚Äôs Birthday -->
    <div class="card"
      data-title="Daddy‚Äôs Birthday üéâ"
      data-date="04-14"
      data-note="your special day, muah!"
      data-img="daddy-birthday.jpg">
      <div class="emoji">üéâ</div>
      <div class="event">Daddy‚Äôs Birthday</div>
      <div class="days"></div>
      <div class="note">your special day, muah!</div>
      <img src="daddy-birthday.jpg" alt="Daddy Birthday"/>
    </div>

    <!-- End of Exams -->
    <div class="card"
      data-title="End of Exams üìö"
      data-absolute="2025-12-30T23:59:59"
      data-note="The end of stressüå∑"
      data-img="exam-end.jpg">
      <div class="emoji">üìö</div>
      <div class="event">End of Exams</div>
      <div class="days"></div>
      <div class="note">The end of stressüå∑</div>
    </div>

    <!-- We meet!! -->
    <div class="card"
      data-title="We meet!! üíû"
      data-absolute="2025-11-27T00:00:00"
      data-note="Finally together again üíñ"
      data-img="meeting.jpg">
      <div class="emoji">üíû</div>
      <div class="event">We meet!!</div>
      <div class="days"></div>
      <div class="note">Finally together again üíñ</div>
      <img src="meeting.jpg" alt="Our Meeting"/>
    </div>

    <!-- Days Since Section -->
    <h2 style="margin-top: 40px;">‚ú® Our Journey So Far ‚ú®</h2>

    <div class="card" id="first-talk" onclick="toggleDetail('talk', '2025-04-22')">
      <h2>üí¨ Days Since We First Talked</h2>
      <p id="talk-days">Loading...</p>
    </div>

    <div class="card" id="first-date" onclick="toggleDetail('date', '2025-08-03')">
      <h2>üç∞ Days Since Our First Date</h2>
      <p id="date-days">Loading...</p>
    </div>

    <div class="card" id="first-iloveyou" onclick="toggleDetail('love', '2025-08-28')">
      <h2>‚ù§Ô∏è Days Since We Said "I Love You"</h2>
      <p id="love-days">Loading...</p>
    </div>
  </div>

  <footer>Made with üíñ by Kitten</footer>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-card">
      <h3 class="modal-title" id="modalTitle"></h3>
      <p class="modal-sub" id="modalNote"></p>
      <div class="bigtime" id="liveTime"></div>
      <div class="units">Days : Hours : Minutes : Seconds</div>
      <button class="modal-close" id="closeBtn">Close</button>
    </div>
  </div>

  <script>
    /* ---------- Shared refs & state (FIX) ---------- */
    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modalTitle");
    const modalNote = document.getElementById("modalNote");
    const liveTime = document.getElementById("liveTime");
    const closeBtn = document.getElementById("closeBtn");
    let timer = null;

    /* ---------- ‚ÄúDays Since‚Äù helpers (unchanged behavior) ---------- */
    const intervals = {};

    function updateDetailedTime(startDate, elementId, mode = "days") {
      const start = new Date(startDate);
      const now = new Date();
      const diff = now - start;

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      const element = document.getElementById(elementId);

      if (mode === "days") {
        element.textContent = `${days} days üí´`;
      } else {
        element.textContent = `${days} days, ${hours} hrs, ${minutes} mins, ${seconds} secs ‚ú®`;
      }
    }

    function toggleDetail(type, startDate) {
      const elementId = `${type}-days`;

      if (intervals[type]) {
        clearInterval(intervals[type]);
        intervals[type] = null;
        updateDetailedTime(startDate, elementId, "days");
      } else {
        updateDetailedTime(startDate, elementId, "full");
        intervals[type] = setInterval(() => {
          updateDetailedTime(startDate, elementId, "full");
        }, 1000);
      }
    }

    // Initial load (days only)
    updateDetailedTime("2025-04-22", "talk-days");
    updateDetailedTime("2025-08-03", "date-days");
    updateDetailedTime("2025-08-28", "love-days");

    /* ---------- Countdown cards (tap to see exact time) ---------- */
    function parseDate(card) {
      // exact timestamp if provided
      const abs = card.dataset.absolute;
      if (abs) {
        const d = new Date(abs);
        return isNaN(d) ? null : d;
      }
      // else, month-day combo (e.g., "09-06")
      const dd = card.dataset.date;
      if (!dd) return null;

      const [month, day] = dd.split('-').map(Number);
      const now = new Date();
      let target = new Date(now.getFullYear(), month - 1, day, 0, 0, 0, 0);
      if (target < now) target.setFullYear(now.getFullYear() + 1);
      return target;
    }

    function openModal(card) {
      const target = parseDate(card);
      if (!target) return; // skip if bad/missing date

      modalTitle.textContent = card.dataset.title || "";
      modalNote.textContent = card.dataset.note || "";

      // clear any existing ticker
      if (timer) clearInterval(timer);

      const tick = () => {
        const diff = Math.max(0, target - new Date());
        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const m = Math.floor((diff / (1000 * 60)) % 60);
        const s = Math.floor((diff / 1000) % 60);

        liveTime.textContent =
          `${String(d).padStart(2, '0')} : ${String(h).padStart(2, '0')} : ${String(m).padStart(2, '0')} : ${String(s).padStart(2, '0')}`;
      };

      tick(); // run once immediately
      timer = setInterval(tick, 1000);
      modal.classList.add("open");
    }

    function closeModal() {
      modal.classList.remove("open");
      if (timer) clearInterval(timer);
      timer = null;
    }

    // Only bind countdown cards (those with date/absolute)
    document.querySelectorAll('.card[data-date], .card[data-absolute]').forEach(card => {
      card.addEventListener("click", () => openModal(card));
    });

    closeBtn.addEventListener("click", closeModal);
    modal.addEventListener("click", e => { if (e.target === modal) closeModal(); });

    // ESC to close
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modal.classList.contains("open")) closeModal();
    });
  </script>
</body>
</html>
